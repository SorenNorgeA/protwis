{% extends "home/base.html" %}
{% load static %}
{% load humanize %}
{% block addon_css %}
<link rel="stylesheet" href="{% static 'home/css/nv.d3.min.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'home/css/nvd3-update.css' %}" type="text/css" />
<link href="{% static 'home/css/bootstrap-responsive.css' %}" rel="stylesheet" media="screen">


{% endblock %}

{% block content %}

<div class='col-md-12'>
  <br />
  <h3 style='text-align:center;'>Data Mapper Plots</h3>
  <br \>
</div>

{% if sample_data_json %}
<ul>
  {% for value in sample_data_json %}
  <li>{{ value }}</li>
  {% endfor %}
</ul>
{% else %}
<p>No data</p>
{% endif %}

{% if Phylogenetic_data %}
  <p>There is data</p>
  {% else %}
  <p>There is no data</p>
  {% endif %}


<!-- ### Create the panel tabs ### -->
<ul class="nav nav-tabs">
  {% if sample_data_json.0 %}
    <li class="active"><a href="#tab1" data-toggle="tab">Phylogenetic Tree</a></li>
  {% endif %}
  {% if sample_data_json.1 %}
    <li><a href="#tab2" data-toggle="tab">Cluster Analysis</a></li>
  {% endif %}
  {% if sample_data_json.2 %}
    <li><a href="#tab3" data-toggle="tab">List Plot</a></li>
  {% endif %}
  {% if sample_data_json.3 %}
    <li><a href="#tab4" data-toggle="tab">Heatmap</a></li>
  {% endif %}
</ul>

<!-- ## Tab content ## -->
<div class="tab-content">
  <!-- ## Tab 1 - Phylogenetic Tree ## -->
  {% if sample_data_json.0 %}
  <div id="tab1" class="tab-pane fade in active">
    <div style="padding-top: 10px; font-size: 11px; white-space: nowrap;">
      <div>
        
      </div>
    </div>
  </div>
  {% endif %}
  <!-- ## Tab 2 - Cluster Analysis ## -->
  {% if sample_data_json.1 %}
    <div id="tab2" class="tab-pane fade">
      <div style="padding-top: 10px; font-size: 11px; white-space: nowrap;">
      <div id="plotContainer" class="text-center">
        <br />
          <br />
            <h4>Cluster Plot</h4>
          <br />
        <br />
      </div>
      </div>
    </div>
  {% endif %}
  <!-- ## Tab 3 - List Plot ## -->
  {% if sample_data_json.2 %}
    <div id="tab3" class="tab-pane fade">
      <div style="padding-top: 10px; font-size: 11px; white-space: nowrap;"></div>
    </div>
  {% endif %}
  <!-- ## Tab 4 - Heatmap ## -->
  {% if sample_data_json.3 %}
    <div id="tab4" class="tab-pane fade">
      <div style="padding-top: 10px; font-size: 11px; white-space: nowrap;"></div>
    </div>
  {% endif %}
</div>

{% endblock %}

{% block addon_js %}
<script src="{% static 'home/js/d3.min.js' %}"></script>
<script src="{% static 'home/js/nv.d3.min.js' %}"></script>
<script src="{% static 'home/js/saveSvgAsPng.js' %}"></script>
<script src="{% static 'home/js/saveSvg.js' %}"></script>
<script src="{% static 'home/js/phylo_tree.js' %}"></script>
<script src="{% static 'home/js/datamapper.js' %}"></script>

<script type="text/javascript" charset="utf-8">

  var cluster_data = {{ Phylogenetic_data|safe }};
  var cluster_plot = "umap";
  console.log(cluster_data);
  renderClusterPlot(cluster_data, "#plotContainer", cluster_plot);
 
</script>
<!-- <script type="text/javascript" charset="utf-8">
    tree_data = {{ tree_dict | safe }};
    tree_options = {{ tree_options | safe }};
    maxLeafNodeLenght = 46;
    conversion = {"Outer1":"#0000FF",
                  "Outer2":"#FF0000",
                  "Outer3":"#000000",
                  "Outer4":"#008000",
                  "Outer5":"#FFA500"};

    $("#UniProtNames").click(function(){
        $("#UniProtNames").addClass("active");
        $("#IUPHARNames").removeClass("active");
        changeLeavesLabels("tree_plot", "UniProt", whole_dict);
        DrawCircles('tree_plot', circles, maxLeafNodeLenght, conversion, true, false);
    });
    $("#IUPHARNames").click(function() {
      $("#UniProtNames_bal").removeClass("active");
      $("#IUPHARNames_bal").addClass("active");
      changeLeavesLabels("tree_plot","IUPHAR", whole_dict);
      // DrawCircles('tree_plot',circles, maxLeafNodeLenght,conversion,true,false);
    });
    draw_tree(tree_data, tree_options);
    // DrawCircles('tree_plot', circles, maxLeafNodeLenght, conversion, true, false);
    $("#tree_plot svg g").first().attr('transform', 'translate(620,650) scale(0.9,0.9) ');
    $("#tree_plot").attr('height', 1210);
    $("#tree_plot").attr('width', 1110);
</script> -->


<!-- <script>
  var heatmap_data = {'5ht1a': {'value1': 10, 'value2': 5, 'value3': 1, 'value4': 3, 'value5': 20},
                      '5ht2a': {'value1': 12, 'value2': 9, 'value3': 6, 'value4': 30, 'value5': 21},
                      '5ht1d': {'value1': 7, 'value2': 8, 'value3': 16, 'value4': 3, 'value5': 1},
                      '5ht1e': {'value1': 5, 'value2': 11, 'value3': 20, 'value4': 23, 'value5': 11},
                      '5ht2b': {'value1': 18, 'value2': 2, 'value3': 9, 'value4': 13, 'value5': 4}
                      };

  var list_data = {{ list_data|safe }};

  var cluster_data = {{ cluster_data|safe }};
  var cluster_plot = "{{ plot_type }}";

  // renderDataVisualization(list_data);
  // simple_heatmap(heatmap_data, 'heatmap_location', 'heatmap_svg', 'Legend Label');
  // renderClusterPlot(cluster_data, "#plotContainer", cluster_plot);
</script> -->
{% endblock %}
